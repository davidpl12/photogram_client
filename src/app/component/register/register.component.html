<body>
  <h2>Registro</h2>

  <form [formGroup]="registerForm" (ngSubmit)="register()" method="POST" enctype="multipart/form-data" class="container">
    <div class="row">
      <div class="col">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" formControlName="nombre" required>
        <div *ngIf="registerForm.controls['nombre'].invalid && (registerForm.controls['nombre'].dirty || registerForm.controls['nombre'].touched)" class="error-message">
          <span *ngIf="registerForm.controls['nombre'].hasError('required')">Nombre es requerido</span>
        </div>
      </div>
      <div class="col">
        <label for="apellidos">Apellidos:</label>
        <input type="text" id="apellidos" name="apellidos" formControlName="apellidos" required>
        <div *ngIf="registerForm.controls['apellidos'].invalid && (registerForm.controls['apellidos'].dirty || registerForm.controls['apellidos'].touched)" class="error-message">
          <span *ngIf="registerForm.controls['apellidos'].hasError('required')">Apellidos son requeridos</span>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <label for="sexo">Sexo:</label>
        <select id="sexo" name="sexo" formControlName="sexo" required>
          <option value="Hombre">Hombre</option>
        <option value="Mujer">Mujer</option>
        <option value="Mujer">Otro</option>
        </select>
        <div *ngIf="registerForm.controls['sexo'].invalid && (registerForm.controls['sexo'].dirty || registerForm.controls['sexo'].touched)" class="error-message">
          <span *ngIf="registerForm.controls['sexo'].hasError('required')">Sexo es requerido</span>
        </div>
      </div>
      <div class="col">
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" formControlName="email" required>
        <div *ngIf="registerForm.controls['email'].invalid && (registerForm.controls['email'].dirty || registerForm.controls['email'].touched)" class="error-message">
          <span *ngIf="registerForm.controls['email'].hasError('required')">Email es requerido</span>
          <span *ngIf="registerForm.controls['email'].hasError('email')">Email inválido</span>
          <span *ngIf="emailExists">Email no disponible</span>
        </div>
      </div>
    </div>

    <div>
      <label for="user">Usuario:</label>
      <input type="text" id="user" name="user" formControlName="user" required>
      <div *ngIf="registerForm.controls['user'].invalid && (registerForm.controls['user'].dirty || registerForm.controls['user'].touched)" class="error-message">
        <span *ngIf="registerForm.controls['user'].hasError('required')">Usuario es requerido</span>
        <span *ngIf="userExists">Usuario no disponible</span>
      </div>
    </div>

    <div>
      <label for="password">Contraseña:</label>
      <input type="password" id="password" name="password" formControlName="password" required>
      <div *ngIf="registerForm.controls['password'].invalid && (registerForm.controls['password'].dirty || registerForm.controls['password'].touched)" class="error-message">
        <span *ngIf="registerForm.controls['password'].hasError('required')">Contraseña es requerida</span>
      </div>
    </div>

    <div>
      <label for="fecha_nac">Fecha de Nacimiento:</label>
      <input type="date" id="fecha_nac" name="fecha_nac" formControlName="fecha_nac" required>
      <div *ngIf="registerForm.controls['fecha_nac'].invalid && (registerForm.controls['fecha_nac'].dirty || registerForm.controls['fecha_nac'].touched)" class="error-message">
        <span *ngIf="registerForm.controls['fecha_nac'].hasError('required')">Fecha de Nacimiento es requerida</span>
      </div>
    </div>

    <div>
      <label for="foto_perfil">Foto de Perfil:</label>
      <input type="file" accept="image/*" id="foto_perfil" name="foto_perfil" (change)="onFileSelected($event)">
    </div>

    <button type="submit" [disabled]="registerForm.invalid" class="button-primary">Registrar</button>
  </form>

  <span>¿Ya tienes cuenta? <a href="/login">Inicia sesión</a></span>
</body>
